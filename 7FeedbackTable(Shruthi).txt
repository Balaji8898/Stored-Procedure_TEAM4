--Feedback table

--CREATE SEQUENCE FOR RATING_TBL--
CREATE SEQUENCE RATING_ORDER_ID AS INT START WITH 1001 INCREMENT BY 1;


--PROCEDURE TO CREATE RECORDS IN RATING_TBL--
CREATE PROCEDURE PROC_RATE_ORDER
@RATING_ORDER_ID INT,
@RATE_ORDER BIT,
@FEEDBACK_ORDER VARCHAR(100),
@FEEDBACK_ORDER_DATE DATETIME,
@RATE_RESTAURANT BIT,
@FEEDBACK_RESTAURANT VARCHAR(100)
AS
BEGIN
INSERT INTO tbl_RATING(RATING_ORDER_ID,
RATE_ORDER,
FEEDBACK_ORDER,
FEEDBACK_ORDER_DATE,
RATE_RESTAURANT,
FEEDBACK_RESTAURANT,
FEEDBACK_RESTAURANT_DATE)
VALUES (NEXT VALUE FOR RATING_ORDER_ID,
@RATE_ORDER,
@FEEDBACK_ORDER,
GETDATE(),
@RATE_RESTAURANT,
@FEEDBACK_RESTAURANT,
GETDATE())
END;


SELECT * FROM tbl_RATING

CREATE table RATE_ORDER_UPDATE(
RATING_ORDER_ID INT,
RATE_ORDER BIT,
FEEDBACK_ORDER VARCHAR(100),
FEEDBACK_ORDER_DATE DATETIME,
RATE_RESTAURANT BIT,
FEEDBACK_RESTAURANT VARCHAR(100))

--PROCEDURE TO UPDATE RATING_TBL--
CREATE PROCEDURE PROC_RATE_ORDER_UPDATE
@RATING_ORDER_ID INT,
@RATE_ORDER BIT,
@FEEDBACK_ORDER VARCHAR(100),
@FEEDBACK_ORDER_DATE DATETIME,
@RATE_RESTAURANT BIT,
@FEEDBACK_RESTAURANT VARCHAR(100)
AS
BEGIN
UPDATE tbl_RATINGG SET RATING_ORDER_ID=@RATING_ORDER,
RATE_ORDER=@RATE_ORDER,
FEEDBACK_ORDER=@FEEDBACK_ORDER,
FEEDBACK_ORDER_DATE=GETDATE(),
RATE_RESTAURANT=@RATE_RESTAURANT,
FEEDBACK_RESTAURANT=@FEEDBACK_RESTAURANT,
FEEDBACK_RESTAURANT_DATE=GETDATE()
END
